<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„œì§„í…Œí¬ AI ì¼ì • ê´€ë¦¬</title>
    <style>
        body { 
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif; 
            max-width: 600px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: #f4f7f9;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 20px; 
            cursor: pointer; 
            margin-top: 10px; 
            border: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
            margin-right: 5px; /* ë²„íŠ¼ ê°„ê²© */
        }
        #start-voice-btn { background-color: #007bff; color: white; }
        #start-voice-btn:hover { background-color: #0056b3; }
        
        #submit-text-btn { background-color: #28a745; color: white; }
        #submit-text-btn:hover { background-color: #1e7e34; }

        /* ìƒˆë¡œ ì¶”ê°€ëœ ë¡œê·¸ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #login-btn { background-color: #6c757d; color: white; }
        #login-btn:hover { background-color: #5a6268; }
        
        .task-section {
            background: white;
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .task-section h3 {
            margin-top: 0;
            color: #444;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        ul { padding-left: 20px; }
        li { margin-bottom: 5px; color: #555; }
        .date-badge {
            font-size: 0.8em;
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            color: #666;
        }

        #voice-result { font-weight: bold; color: #d9534f; display: block; margin-top: 5px; }
        #status-message { 
            color: #007bff; margin-top: 15px; font-size: 1.1em; padding: 10px; 
            border: 1px solid #cce5ff; background-color: #e2f0ff; border-radius: 5px; 
        }
        input[type="text"] {
            padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; 
            box-sizing: border-box; width: 70%;
        }
        label { display: block; margin-top: 15px; margin-bottom: 5px; font-weight: bold; }
        
        .calendar-container {
            margin-top: 30px; position: relative; padding-bottom: 75%; height: 0; overflow: hidden;
        }
        .calendar-container iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ ì„œì§„í…Œí¬ AI ì¼ì • ê´€ë¦¬</h1>
    
    <button id="login-btn">ğŸ”„ ë¡œê·¸ì¸ ë° ì¼ì • ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <br><br>

    <button id="start-voice-btn">ğŸ¤ ë§í•˜ê¸°</button>
    <p>ì¸ì‹ëœ ë‚´ìš©: <span id="voice-result"></span></p>

    <hr>

    <label for="text-input">í…ìŠ¤íŠ¸ ì…ë ¥:</label>
    <input type="text" id="text-input" placeholder="ì˜ˆ: ë‚´ì¼ ì˜¤í›„ 3ì‹œì— ë³´ê³ ì„œ ì œì¶œí•˜ê¸°">
    <button id="submit-text-btn">í•  ì¼ ì¶”ê°€</button>

    <p id="status-message">ì‹œìŠ¤í…œ ì¤€ë¹„ ì¤‘...</p>
    
    <div class="task-section">
        <h3>ğŸ“… ì˜¤ëŠ˜ ì¼ì • (Today)</h3>
        <ul id="today-list"><li>ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</li></ul>
    </div>

    <div class="task-section">
        <h3>ğŸ—“ï¸ ì´ë²ˆ ì£¼ ì¼ì • (This Week)</h3>
        <ul id="week-list"><li>ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</li></ul>
    </div>

    <div class="calendar-container">
        <iframe src="https://calendar.google.com/calendar/embed?src=cce03f167bf28bafd3795833209784265eadca0ed8138cae7d9024470ad36c66%40group.calendar.google.com&ctz=Asia%2FSeoul" style="border: 0" frameborder="0" scrolling="no"></iframe>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>

    <script>
        /* ğŸš¨ [ì„¤ì •] í´ë¼ì´ì–¸íŠ¸ ID (ê¸°ì¡´ ID ìœ ì§€) */
        const CLIENT_ID = '1049915608396-4saprmlim0i9t9jv2dhkje4eq6uqqlnr.apps.googleusercontent.com'; 

        const SCOPES = 'https://www.googleapis.com/auth/tasks'; 
        const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/tasks/v1/rest"];

        let tokenClient;
        let gapiInited = false;
        let gisInited = false;

        const statusMessage = document.getElementById('status-message');
        const voiceResult = document.getElementById('voice-result');
        const textInput = document.getElementById('text-input');
        const todayList = document.getElementById('today-list');
        const weekList = document.getElementById('week-list');

        function gapiLoaded() { gapi.load('client', intializeGapiClient); }

        async function intializeGapiClient() {
            await gapi.client.init({ discoveryDocs: DISCOVERY_DOCS });
            gapiInited = true;
            maybeEnableButtons();
        }

        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: '',
            });
            gisInited = true;
            maybeEnableButtons();
        }

        function maybeEnableButtons() {
            if (gapiInited && gisInited) {
                statusMessage.textContent = "âœ… ì¤€ë¹„ ì™„ë£Œ. [ë¡œê·¸ì¸] ë˜ëŠ” [ë§í•˜ê¸°] ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.";
                
                // ì´ì „ì— ë¡œê·¸ì¸ í•œ ê¸°ë¡ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ ë¡œë”© ì‹œë„
                if (gapi.client.getToken() !== null) {
                    loadTasksList();
                }
            }
        }

        // í†µí•© ì¸ì¦ ë° ì‹¤í–‰ í•¨ìˆ˜
        function handleAuthAndAction(actionCallback) {
            if
